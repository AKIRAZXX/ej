	<style>

	.table {
		border-collapse: collapse;
		width: 100%;
		text-align: center;
	}
	.table td {
		border: 1px solid #ccc;
		line-height: 2em;
	}
	.table tr.current {
		background-color: #ededed;
	}

	.none {
		display: none;
	}
	.form {
		
	}
	.btns {
		margin-bottom: .5em;
	}
	.order{

	}
</style>

<script>
var baseURL = "http://134.175.154.93:6677";
// 加载数据
function reloadData(){
	var url = baseURL+"/order/findAllOrder";
	$.get(url,function(response,status){
		//1. 将tbody清空
		$("#order_tbl tbody").empty();
		//2. 追加新的值
		response.data.forEach(function(item){
			var newTr = $(`<tr>
				<td><input type="checkbox" value="`+item.id+`"></td>
				<td>`+item.customerId+`</td>
				<td>`+item.addressId+`</td>
				<td>`+item.orderTime+`</td>
				<td>`+item.waiterId+`</td>
				<td>`+item.total+`</td>
				<td>
					<a class="btn_del" href="#">删除</a>
					<a class="btn_upd" href="#">修改</a>
				</td>
			</tr>`);
			$("#order_tbl").append(newTr)
		});
	});
}

$(function(){
//给表单绑定事件
document.forms[0].onsubmit = function(event){
			// 1. 获取用户的输入

	var id = document.querySelector("input[name=id]").value;
	var customerId = document.querySelector("input[name=customerId]").value;
	var addressId = document.querySelector("input[name=addressId]").value;
	var orderTime = document.querySelector("input[name=orderTime]").value;
	var waiterId = document.querySelector("input[name=waiterId]").value;
	var total = document.querySelector("input[name=total]").value;

	var url = baseURL+"/order/insertOrder";
	var data ;
	if(id){
		data = "id="+id+"&customerId="+customerId+"&addressId="+addressId+"&orderTime="+orderTime+"&waiterId="+waiterId+"&total="+total;
	} else {
		data ="customerId="+customerId+"&addressId="+addressId+"&orderTime="+orderTime+"&waiterId="+waiterId+"&total="+total;

	}


	$.post(url,data,function(a,b){
		alert(a.message);
		reloadData();
		});
	event.preventDefault();
		}
//给添加按钮绑定事件
$("#btn_add").on("click",function(){
	document.querySelector("input[name=customerId]").value = "";
	document.querySelector("input[name=addressId]").value = "";
	document.querySelector("input[name=id]").value = "";
	document.querySelector("input[name=orderTime]").value = "" ;
	document.querySelector("input[name=waiterId]").value = "";
	document.querySelector("input[name=total]").value = "";
			
		})



//给删除按钮绑定事件
$("tbody").on("click",'a',function(){
	if(event.target.className == "btn_del"){
	var id = event.target.parentNode.parentNode.firstElementChild.firstElementChild.value;
			// 2. 编写ajax进行删除
			var url = baseURL+"/order/deleteOrderById";
			var data = "id="+id;
			$.post(url,data,function(response,status){
				alert(response.message);
				reloadData();
			});
	}
	if(event.target.className == "btn_upd"){
	var id = event.target.parentNode.parentNode.children[0].firstElementChild.value;
	var customerId = event.target.parentNode.parentNode.children[1].innerText;
	var addressId = event.target.parentNode.parentNode.children[2].innerText;
	var orderTime = event.target.parentNode.parentNode.children[3].innerText;
	var waiterId = event.target.parentNode.parentNode.children[4].innerText;
	var total = event.target.parentNode.parentNode.children[5].innerText;
	document.querySelector("input[name=customerId]").value = customerId;
	document.querySelector("input[name=addressId]").value = addressId;
	document.querySelector("input[name=id]").value = id;
	document.querySelector("input[name=orderTime]").value = orderTime;
	document.querySelector("input[name=waiterId]").value = waiterId;
	document.querySelector("input[name=total]").value = total;
			
	};
})

})
// 文档加载完毕之后执行
$(function(){
	//调用重载数据
	reloadData();
})
</script>

</head>
<body>
	<div class="order">
	<div class="btns">
		<div id="btn_add" class="btn">添加</div>
		<div id="btn_import" class="btn">批量导入</div>
	</div>
	
	<div style="margin-bottom: .5em" class="form">
		<!-- 表单 -->
		<form action="javascript:void(0)">
			<input type="hidden" name="id" />
			顾客编号<input type="text" name="customerId"/>
			地址编号<input type="text" name="addressId"/>
			下单时间<input type="text" name="orderTime"/>
			员工编号<input type="text" name="waiterId"/>
			总计个数<input type="text" name="total"/>
			<input type="submit" value="提交">
		</form>
	</div>



	<table class="table" id="order_tbl">
		<thead>
			<tr>
				<td width="80px">编号</td>
				<td>顾客编号</td>
				<td>地址编号</td>
				<td>下单时间</td>
				<td>员工编号</td>
				<td>总计个数</td>
				<td width="100px">操作</td>
			</tr>
		</thead>
		<tbody>
			
		</tbody>
	</table>
</div>
</body>
</html>